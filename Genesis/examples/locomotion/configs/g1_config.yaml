# G1 Humanoid Locomotion Configuration

env:
  num_actions: 12
  episode_length_s: 20.0
  resampling_time_s: 4.0
  action_scale: 0.25
  simulate_action_latency: true
  clip_actions: 100.0
  
  # Termination conditions
  termination_if_roll_greater_than: 20  # degrees
  termination_if_pitch_greater_than: 20  # degrees
  termination_if_base_height_less_than: 0.5  # meters
  
  # Initial pose
  base_init_pos: [0.0, 0.0, 0.80]
  base_init_quat: [1.0, 0.0, 0.0, 0.0]
  
  # Default joint angles (rad)
  default_joint_angles:
    left_hip_pitch_joint: -0.1
    left_hip_roll_joint: 0.0
    left_hip_yaw_joint: 0.0
    left_knee_joint: 0.3
    left_ankle_pitch_joint: -0.2
    left_ankle_roll_joint: 0.0
    right_hip_pitch_joint: -0.1
    right_hip_roll_joint: 0.0
    right_hip_yaw_joint: 0.0
    right_knee_joint: 0.3
    right_ankle_pitch_joint: -0.2
    right_ankle_roll_joint: 0.0
  
  # Joint names (order matters for action indexing)
  joint_names:
    - left_hip_pitch_joint
    - left_hip_roll_joint
    - left_hip_yaw_joint
    - left_knee_joint
    - left_ankle_pitch_joint
    - left_ankle_roll_joint
    - right_hip_pitch_joint
    - right_hip_roll_joint
    - right_hip_yaw_joint
    - right_knee_joint
    - right_ankle_pitch_joint
    - right_ankle_roll_joint
  
  # PD gains (joint-specific)
  stiffness:
    hip_yaw: 100
    hip_roll: 100
    hip_pitch: 100
    knee: 150
    ankle: 40
  
  damping:
    hip_yaw: 2
    hip_roll: 2
    hip_pitch: 2
    knee: 4
    ankle: 2

observation:
  num_obs: 45  # 3 ang_vel + 3 gravity + 3 commands + 12 dof_pos + 12 dof_vel + 12 actions
  obs_scales:
    lin_vel: 2.0
    ang_vel: 0.25
    dof_pos: 1.0
    dof_vel: 0.05

commands:
  num_commands: 3
  lin_vel_x_range: [-1.0, 1.5]
  lin_vel_y_range: [0.0, 0.0]
  ang_vel_range: [0.0, 0.0]

# Reward configuration
rewards:
  # Reward scales
  scales:
    LinVelXYReward: 10.0
    AngVelZReward: 10.0
    LinVelZPenalty: 20.0
    AngVelXYPenalty: 0.5
    OrientationPenalty: 100.0
    ActionRatePenalty: 0.1
    ActionLimitPenalty: 0.1
    HipYawPenalty: 5.0
    HipRollPenalty: 5.0
    BodyRollPenalty: 100.0
    FeetAirTimePenalty: 100.0
    G1FeetSlidePenalty: 2.0
    FeetOrientationPenalty: 30.0
    DofPosLimitPenalty: 100.0
  # Reward parameters
  parameters:
    tracking_sigma: 0.25
    base_height_target: 0.75
    target_feet_air_time: 0.4
    feet_height_target: 0.2
    action_limit: 1.0
    contact_force_limit: 1.0  # normalized

# Domain randomization
randomization:
  add_noise: false
  noise_scales:
    dof_pos: 0.01
    dof_vel: 0.1
    ang_vel: 0.2
    gravity: 0.05
    commands: 0.0
  
  randomize_friction: false
  friction_range: [0.5, 1.25]
  
  randomize_base_mass: false
  added_mass_range: [-1.0, 3.0]
  
  randomize_motor_strength: false
  motor_strength_range: [0.8, 1.2]
  
  push_robots: false
  push_interval_s: 15
  max_push_vel_xy: 1.0

# Training configuration
training:
  algorithm:
    class_name: PPO
    clip_param: 0.2
    desired_kl: 0.01
    entropy_coef: 0.01
    gamma: 0.99
    lam: 0.95
    learning_rate: 0.001
    max_grad_norm: 1.0
    num_learning_epochs: 5
    num_mini_batches: 4
    schedule: adaptive
    use_clipped_value_loss: true
    value_loss_coef: 1.0
  
  policy:
    activation: elu
    actor_hidden_dims: [256, 256, 128]
    critic_hidden_dims: [256, 256, 128]
    init_noise_std: 1.0
    class_name: ActorCritic
  
  runner:
    num_steps_per_env: 24
    save_interval: 100
    log_interval: 1
    seed: 1
